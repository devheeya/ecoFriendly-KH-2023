<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bookMapper">
	
	<!-- resultMap 영역 -->
	
	
	
	<!-- 도서 조회수 조회 -->
	<select id="countList" resultType="book">
		SELECT
			ISBN13 ISBN13,
    		BOOK_COUNT bookCount
		FROM
			TB_BOOK
	</select>

	<!-- 도서정보insert -->
	<insert id="insertBook" parameterType="String">
		INSERT INTO TB_BOOK
						(
						ISBN13,
						BOOK_COUNT
						)
		VALUES
						(
						#{ISBN},
						1
						)
	</insert>
	
	<!-- 도서정보 조회수 증가 -->
	<update id="increaseBook" parameterType="String">
		UPDATE TB_BOOK
		SET
			BOOK_COUNT = BOOK_COUNT + 1
		WHERE
			ISBN13 = #{ISBN}
	</update>
	
	<!-- 도서정보 조회수 조회 -->
	<select id="countBook" parameterType="String" resultType="_int">
		SELECT
			BOOK_COUNT
		FROM
			TB_BOOK
		WHERE
			ISBN13 = #{ISBN}
	</select>
	
	<!-- 북마크 추가 -->
	<insert id="insertBookMark" parameterType="hashMap">
		INSERT INTO TB_LIKE_BOOK
		VALUES
				(
				#{userNo},
				#{ISBN}
				)
	</insert>
	
	<!-- 북마크 제거 -->
	<delete id="removeBookMark" parameterType="hashMap">
		DELETE FROM TB_LIKE_BOOK
		WHERE
			ISBN13 = #{ISBN}
		AND
			USER_NO = #{userNo}
	</delete>
	
	<!-- 북마크 조회 -->
	<select id="selectBookMark" parameterType="hashMap" resultType="_int">
		SELECT
			COUNT(*)
		FROM
			TB_LIKE_BOOK
		WHERE
			ISBN13 = #{ISBN}
		AND
			USER_NO = #{userNo}
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>

